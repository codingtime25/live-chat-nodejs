(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{37:function(e,t,a){e.exports=a(68)},64:function(e,t){},68:function(e,t,a){"use strict";a.r(t);var n=a(0),s=a.n(n),r=a(33),c=a.n(r),i=a(1),l=a(2),o=a(4),u=a(3),m=a(5),p=a(34),h=a.n(p),g=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).handleSubmit=function(e){e.preventDefault();var t=a.state,n=t.socket,s=t.username;s&&n.emit("VERIFY_USER",s,a.setUsername)},a.setUsername=function(e){var t=e.username,n=e.isUser,s=a.props.setUsername,r=a.state.socket;n?a.setError("Username taken"):(a.setError(null),r.emit("add user",t),s(t))},a.setError=function(e){a.setState({error:e})},a.state={username:"",error:null,socket:null},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this.props.socket;this.setState({socket:e})}},{key:"render",value:function(){var e=this,t=this.state,a=t.username,n=t.error;return s.a.createElement("form",{className:"login",onSubmit:this.handleSubmit},s.a.createElement("div",{className:"login-form"},s.a.createElement("label",{htmlFor:"username"},s.a.createElement("h2",null,"What's your username?")),s.a.createElement("input",{id:"username",value:a,onChange:function(t){e.setState({username:t.target.value})},type:"text",autoComplete:"off",maxLength:"14"}),s.a.createElement("div",{className:"error"},n||null)))}}]),t}(n.Component),d=a(13),f=a(35),v=a.n(f),y=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).getTime=function(){var e=new Date(Date.now());return"".concat(e.getHours(),":").concat(("0"+e.getMinutes()).slice(-2))},a.scrollDown=a.scrollDown.bind(Object(d.a)(a)),a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"scrollDown",value:function(){var e=this.refs.messages;e.scrollTop=e.scrollHeight}},{key:"componentDidMount",value:function(){this.scrollDown()}},{key:"componentDidUpdate",value:function(e,t){this.scrollDown()}},{key:"renderTypingUsers",value:function(){return v.a.map(this.props.typingUsers,function(e){return s.a.createElement("li",{className:"user-typing text-muted",key:e},s.a.createElement("i",null,"".concat(e," is typing...")))})}},{key:"renderChat",value:function(e,t){var a=this;return e.length>0?e.map(function(e,n){var r=e.username===t?"right":"";return s.a.createElement("li",{key:n,className:r},s.a.createElement("div",null,s.a.createElement("div",{className:"m-box d-flex ".concat(r)},s.a.createElement("span",{className:"m"},e.message),s.a.createElement("small",null,a.getTime())),e.username!==t&&s.a.createElement("span",{className:"text-muted sender"},e.username)))}):s.a.createElement("li",{className:"no-msg text-muted"},"Send a message to start a conversation.")}},{key:"render",value:function(){var e=this.props,t=e.chats,a=e.myUsername;return s.a.createElement("ul",{ref:"messages",className:"messages neutralize"},this.renderChat(t,a),this.renderTypingUsers())}}]),t}(n.Component),E=["#00BCD4","#FFB300","#E91E63","#8BC34A","#00cfb6","#795548"],b=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(l.a)(t,[{key:"_renderUser",value:function(e,t,a){var n=e===t?e+" (You)":e;return s.a.createElement("div",{className:"d-flex"},s.a.createElement("div",{className:"u-pp",style:{background:E[function(e){return e>=E.length?e-E.length*(e/E.length):e}(a)]}},e.charAt(0)),s.a.createElement("span",{style:{lineHeight:"40px",fontSize:"13px"}},n))}},{key:"render",value:function(){var e=this,t=this.props,a=t.users,n=t.myUsername;return s.a.createElement("div",null,s.a.createElement("h2",null,"People"),s.a.createElement("ul",{className:"user-list neutralize"},a.map(function(t,a){return s.a.createElement("li",{key:a},e._renderUser(t,n,a))})))}}]),t}(n.Component),k=a(36),j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(u.a)(t).call(this,e))).addChatMessage=function(e){var t={username:e.username,message:e.message};a.setState({chats:a.state.chats.concat(t)})},a.addChatTyping=function(e){var t=e.username,n=Object.assign({},a.state.typingUsers);n[t]=t,a.setState({typingUsers:n})},a.removeChatTyping=function(e){var t=Object.assign({},a.state.typingUsers);delete t[e.username],a.setState({typingUsers:t})},a.handleSubmit=function(e){e.preventDefault();var t=a.state.message,n=a.props.username;t&&(a.addChatMessage({username:n,message:t}),a.state.socket.emit("new message",t)),a.setState({message:""})},a.onChange=function(e){a.state.typing||(a.setState({typing:!0}),a.state.socket.emit("typing")),a.stopTyping&&clearInterval(a.stopTyping),a.stopTyping=setTimeout(function(){a.state.typing&&(a.state.socket.emit("stop typing"),a.setState({typing:!1}))},400),a.setState({message:e.target.value})},a.state={socket:null,message:"",typing:!1,chats:[],users:[],typingUsers:{}},a}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){var e=this,t=this.props.socket;t.on("login",function(t){e.setState({users:t.users})}),t.on("user joined",function(t){e.setState({users:t.users})}),t.on("new message",function(t){e.addChatMessage(t)}),t.on("typing",function(t){e.addChatTyping(t)}),t.on("stop typing",function(t){e.removeChatTyping(t)}),t.on("user left",function(t){e.setState({users:t.users}),e.removeChatTyping(t)}),this.setState({socket:t})}},{key:"render",value:function(){var e=this.state,t=e.message,a=e.users,n=e.typingUsers,r=this.props.username,c=!this.state.message;return s.a.createElement("div",null,s.a.createElement("div",{id:"header"},s.a.createElement("p",{style:{textAlign:"right"}},s.a.createElement("a",{href:"https://www.vortexnepal.com/manjiltamang/",target:"_blank",rel:"noopener noreferrer",className:"caption"},"By Manjil Tamang"))),s.a.createElement("div",{className:"d-flex"},s.a.createElement("div",{id:"sidebar"},s.a.createElement(b,{users:a,myUsername:r})),s.a.createElement("div",{style:{width:"15px"}}),s.a.createElement("div",{id:"chatbox",className:"d-flex"},s.a.createElement(y,{typingUsers:n,chats:this.state.chats,myUsername:r}),s.a.createElement("form",{className:"d-flex",onSubmit:this.handleSubmit},s.a.createElement("input",{value:t,onChange:this.onChange,placeholder:"Type a message here..."}),s.a.createElement("button",{type:"submit",disabled:c},s.a.createElement(k.a,null))))))}}]),t}(n.Component),O="https://glacial-badlands-28940.herokuapp.com",S=function(e){function t(){var e;return Object(i.a)(this,t),(e=Object(o.a)(this,Object(u.a)(t).call(this))).initSocket=function(){var t=h()(O);e.setState({socket:t})},e.setUsername=function(t){e.setState({username:t})},e.state={username:"",socket:null},e}return Object(m.a)(t,e),Object(l.a)(t,[{key:"componentWillMount",value:function(){this.initSocket()}},{key:"render",value:function(){var e=this.state,t=e.socket,a=e.username;return s.a.createElement("div",{className:"mjl-container"},a?s.a.createElement(j,{username:a,socket:t}):s.a.createElement(g,{setUsername:this.setUsername,socket:t}))}}]),t}(n.Component);var U=function(){return s.a.createElement(S,null)};c.a.render(s.a.createElement(U,null),document.getElementById("root"))}},[[37,1,2]]]);
//# sourceMappingURL=main.0f06b71b.chunk.js.map